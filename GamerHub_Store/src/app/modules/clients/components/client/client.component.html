<main>
  <div class="backgroundPrincipal">  
    <app-encabezado-compras></app-encabezado-compras>
    <main>
      <div class="dashboard2 container content-container">
        <div class="left box-primary" style="padding-left: 120px;">
          <div *ngIf="fotoPerfilBase64">
            <img class="image" [src]="fotoPerfilBase64" alt="Foto de Perfil">
          </div>
          <h3 class="username text-center">{{ profileForm.value.firstName }} {{ profileForm.value.lastName }}</h3>
        
          <!-- Input oculto para seleccionar la foto -->
          <input type="file" id="inputFoto" accept="image/*" style="display: none" (change)="onFileSelected($event)" #fileInput />
        
          <!-- Botón para abrir el selector de archivos -->
          <button (click)="onEditPhotoClick()" class="btn-primary btn btn-min-size text-center">Editar Foto</button>
        
          <!-- Botón para guardar la foto seleccionada -->
          <button (click)="onSavePhoto()" class="btn btn-primary">Guardar Foto</button>
        </div>
        <div class="right tab-content">
          <form [formGroup]="profileForm" class="form-horizontal">
            <div class="formgroup">
              <label for="inputNombre" class="col-sm-2 control-label">Nombres</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="inputNombre" formControlName="firstName" placeholder="firstName">
              </div>
            </div>
            <div class="formgroup">
              <label for="inputApellido" class="col-sm-2 control-label">Apellidos</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="inputApellido" formControlName="lastName" placeholder="lastName">
              </div>
            </div>
            <div class="formgroup">
              <label for="inputEmail" class="col-sm-2 control-label">Email</label>
              <div class="col-sm-10">
                <input type="email" class="form-control" id="inputEmail" formControlName="email" placeholder="email">
              </div>
            </div>
            <div class="formgroup">
              <label for="inputTelefono" class="col-sm-2 control-label">Teléfono</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="inputTelefono" formControlName="phoneNumber" placeholder="phoneNumber">
              </div>
            </div>
            <hr>
            <div class="formgroup">
              <div class="col-sm-offset-2 col-sm-10">
                <button type="button" class="btn-edit btn-min-size" (click)="toggleEdit()" *ngIf="!isEditing">Editar Perfil</button>
                <button type="button" class="btn-cancel btn-min-size" (click)="toggleEdit()" *ngIf="isEditing">Cancelar</button>
                <button type="button" class="btn-save btn-min-size" (click)="saveChanges()" [disabled]="!profileForm.valid || !isEditing">Guardar Cambios</button>
              </div>
            </div>
          </form>
          <div *ngIf="showSuccessMessage" class="alert alert-success" role="alert">
            ¡Perfil guardado con éxito!
          </div>
        </div>
      </div>
    </main>
  </div>
</main>